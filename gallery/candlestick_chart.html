

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Candlestick Chart &mdash; Altair 2.0.0rc1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/altair-plot.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/altair-gallery.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Altair 2.0.0rc1 documentation" href="../index.html"/>
        <link rel="up" title="Example Gallery" href="index.html"/>
        <link rel="next" title="Connected Scatterplot (Lines with Custom Paths)" href="connected_scatterplot.html"/>
        <link rel="prev" title="Box Plot with Min/Max Whiskers" href="boxplot_max_min.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Altair
          

          
            
            <img src="../_static/altair-logo-light.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2.0.0rc1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/starting.html">Basic Statistical Visualization</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/importing.html">Importing Altair</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/display.html">Displaying Charts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/data.html">Specifying Data in Altair</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/encoding.html">Encodings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/marks.html">Marks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/config.html">Configuring Visualizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/transform.html">Data Transformations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/selections.html">Selections: Building Blocks of Interactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/compound_charts.html">Compound Charts: Layer, HConcat, VConcat, Repeat, Facet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/saving_charts.html">Saving Altair Charts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/API.html">API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Case Studies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../case_studies/exploring-weather.html">Exploring Seattle Weather</a></li>
</ul>
<p class="caption"><span class="caption-text">Gallery</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Example Gallery</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#basic-charts">Basic Charts</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#general">General</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="aggregate_bar_chart.html">Horizontal Aggregate Bar Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="anscombe_plot.html">Anscombe’s Quartet</a></li>
<li class="toctree-l3"><a class="reference internal" href="bar_chart_with_highlight.html">Bar Chart with Highlight</a></li>
<li class="toctree-l3"><a class="reference internal" href="bar_chat_with_labels.html">Simple Bar Chart with Labels</a></li>
<li class="toctree-l3"><a class="reference internal" href="beckers_barley_trellis_plot.html">Becker’s Barley Trellis Plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="binned_scatterplot.html">Binned Scatterplot</a></li>
<li class="toctree-l3"><a class="reference internal" href="boxplot_max_min.html">Box Plot with Min/Max Whiskers</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Candlestick Chart</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="connected_scatterplot.html">Connected Scatterplot (Lines with Custom Paths)</a></li>
<li class="toctree-l3"><a class="reference internal" href="cumulative_wiki_donations.html">Cumulative Wikipedia Donations</a></li>
<li class="toctree-l3"><a class="reference internal" href="diverging_stacked_bar_chart.html">Diverging Stacked Bar Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="dot_dash_plot.html">Dot Dash Plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="error_bars_with_ci.html">Error Bars showing Confidence Interval</a></li>
<li class="toctree-l3"><a class="reference internal" href="falkensee.html">Falkensee</a></li>
<li class="toctree-l3"><a class="reference internal" href="grouped_bar_chart.html">Grouped Bar Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="histogram_with_a_global_mean_overlay.html">Histogram with a Global Mean Overlay</a></li>
<li class="toctree-l3"><a class="reference internal" href="horizon_graph.html">Horizon Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="layer_line_color_rule.html">Line Chart with Layered Aggregates</a></li>
<li class="toctree-l3"><a class="reference internal" href="layered_bar_chart.html">Layered Bar Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="layered_chart_bar_mark.html">LayerChart with Bar and Tick</a></li>
<li class="toctree-l3"><a class="reference internal" href="layered_heatmap_text.html">Layering text over a heatmap</a></li>
<li class="toctree-l3"><a class="reference internal" href="layered_histogram.html">Layered Histogram</a></li>
<li class="toctree-l3"><a class="reference internal" href="layered_plot_with_dual_axis.html">Layered Plot with Dual-Axis</a></li>
<li class="toctree-l3"><a class="reference internal" href="line_percent.html">Line Chart with Percent axis</a></li>
<li class="toctree-l3"><a class="reference internal" href="line_with_ci.html">Line chart with Confidence Interval Band</a></li>
<li class="toctree-l3"><a class="reference internal" href="mean_overlay_over_precipitiation_chart.html">Layered Bar Chart with Line as Mean</a></li>
<li class="toctree-l3"><a class="reference internal" href="natural_disasters.html">Natural Disasters</a></li>
<li class="toctree-l3"><a class="reference internal" href="normalized_stacked_bar_chart.html">Normalized Stacked Bar Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="poly_fit.html">Polynomial Fit Plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="ranged_dot_plot.html">Ranged Dot Plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="slope_graph.html">Slope Graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="stacked_area_chart.html">Stacked Area Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="stacked_bar_chart.html">Stacked Bar Chart</a></li>
<li class="toctree-l3"><a class="reference internal" href="stem_and_leaf.html">Steam and Leaf Plot</a></li>
<li class="toctree-l3"><a class="reference internal" href="streamgraph.html">Streamgraph</a></li>
<li class="toctree-l3"><a class="reference internal" href="trellis_area.html">Trellis Area</a></li>
<li class="toctree-l3"><a class="reference internal" href="trellis_histogram.html">Trellis Histogram</a></li>
<li class="toctree-l3"><a class="reference internal" href="trellis_stacked_bar_chart.html">Trellis Stacked Bar Chart</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#geographic">Geographic</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#interactive">Interactive</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Altair</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Example Gallery</a> &raquo;</li>
        
      <li>Candlestick Chart</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/gallery/candlestick_chart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="candlestick-chart">
<span id="gallery-candlestick-chart"></span><h1>Candlestick Chart<a class="headerlink" href="#candlestick-chart" title="Permalink to this headline">¶</a></h1>
<p>A candlestick chart inspired from Protovis(<a class="reference external" href="http://mbostock.github.io/protovis/ex/candlestick.html">http://mbostock.github.io/protovis/ex/candlestick.html</a>). This example shows the performance of the Chicago Board Options Exchange Volatility Index (VIX) in the summer of 2009. The thick bar represents the opening and closing prices, while the thin bar shows intraday high and low prices; if the index closed higher on a given day, the bars are colored green rather than red.</p>

<div id="candlestick_chart-rst-altair-plot-0">
<script>
  // embed when document is loaded, to ensure vega library is available
  // this works on all modern browsers, except IE8 and older
  document.addEventListener("DOMContentLoaded", function(event) {
      var spec = {"config": {"view": {"width": 400, "height": 300}}, "layer": [{"data": {"values": [{"close": 30.04, "date": "01-Jun-2009", "high": 30.05, "low": 28.45, "open": 28.7, "ret": -4.89396411092985, "signal": "short"}, {"close": 29.63, "date": "02-Jun-2009", "high": 30.13, "low": 28.3, "open": 30.04, "ret": -0.322580645161295, "signal": "short"}, {"close": 31.02, "date": "03-Jun-2009", "high": 31.79, "low": 29.62, "open": 29.62, "ret": 3.68663594470045, "signal": "short"}, {"close": 30.18, "date": "04-Jun-2009", "high": 31.02, "low": 29.92, "open": 31.02, "ret": 4.51010886469673, "signal": "short"}, {"close": 29.62, "date": "05-Jun-2009", "high": 30.81, "low": 28.85, "open": 29.39, "ret": 6.08424336973478, "signal": "short"}, {"close": 29.77, "date": "08-Jun-2009", "high": 31.82, "low": 26.41, "open": 30.84, "ret": 1.2539184952978, "signal": "short"}, {"close": 28.27, "date": "09-Jun-2009", "high": 29.77, "low": 27.79, "open": 29.77, "ret": -5.02431118314424, "signal": "short"}, {"close": 28.46, "date": "10-Jun-2009", "high": 29.74, "low": 26.9, "open": 26.9, "ret": -5.46623794212217, "signal": "short"}, {"close": 28.11, "date": "11-Jun-2009", "high": 28.11, "low": 26.81, "open": 27.36, "ret": -8.3743842364532, "signal": "short"}, {"close": 28.15, "date": "12-Jun-2009", "high": 28.5, "low": 27.73, "open": 28.08, "ret": -5.52763819095477, "signal": "short"}, {"close": 30.81, "date": "15-Jun-2009", "high": 31.09, "low": 29.64, "open": 29.7, "ret": 3.4920634920635, "signal": "long"}, {"close": 32.68, "date": "16-Jun-2009", "high": 32.75, "low": 30.07, "open": 30.81, "ret": 0.155038759689914, "signal": "short"}, {"close": 31.54, "date": "17-Jun-2009", "high": 32.77, "low": 30.64, "open": 31.19, "ret": 5.82822085889571, "signal": "short"}, {"close": 30.03, "date": "18-Jun-2009", "high": 31.54, "low": 29.6, "open": 31.54, "ret": 8.17610062893082, "signal": "short"}, {"close": 27.99, "date": "19-Jun-2009", "high": 29.32, "low": 27.56, "open": 29.16, "ret": 8.59872611464968, "signal": "short"}, {"close": 31.17, "date": "22-Jun-2009", "high": 32.05, "low": 30.3, "open": 30.4, "ret": 15.4907975460123, "signal": "short"}, {"close": 30.58, "date": "23-Jun-2009", "high": 31.54, "low": 27.83, "open": 31.3, "ret": 11.7370892018779, "signal": "short"}, {"close": 29.05, "date": "24-Jun-2009", "high": 30.58, "low": 28.79, "open": 30.58, "ret": -10.4234527687296, "signal": "long"}, {"close": 26.36, "date": "25-Jun-2009", "high": 29.56, "low": 26.3, "open": 29.45, "ret": 0.0, "signal": "long"}, {"close": 25.93, "date": "26-Jun-2009", "high": 27.22, "low": 25.76, "open": 27.09, "ret": 0.0, "signal": "long"}, {"close": 25.35, "date": "29-Jun-2009", "high": 27.18, "low": 25.29, "open": 25.93, "ret": 5.26315789473684, "signal": "long"}, {"close": 26.35, "date": "30-Jun-2009", "high": 27.38, "low": 25.02, "open": 25.36, "ret": 6.73758865248228, "signal": "long"}]}, "mark": "rule", "encoding": {"color": {"condition": {"test": "datum.open < datum.close", "value": "#06982d"}, "value": "#ae1325"}, "x": {"type": "temporal", "axis": {"format": "%m/%d", "title": "Date in 2009"}, "field": "date", "scale": {"domain": [{"month": 5, "date": 31, "year": 2009}, {"month": 7, "date": 1, "year": 2009}]}, "timeUnit": "yearmonthdate"}, "y": {"type": "quantitative", "axis": {"title": "Price"}, "field": "low", "scale": {"zero": false}}, "y2": {"type": "quantitative", "field": "high"}}}, {"data": {"values": [{"close": 30.04, "date": "01-Jun-2009", "high": 30.05, "low": 28.45, "open": 28.7, "ret": -4.89396411092985, "signal": "short"}, {"close": 29.63, "date": "02-Jun-2009", "high": 30.13, "low": 28.3, "open": 30.04, "ret": -0.322580645161295, "signal": "short"}, {"close": 31.02, "date": "03-Jun-2009", "high": 31.79, "low": 29.62, "open": 29.62, "ret": 3.68663594470045, "signal": "short"}, {"close": 30.18, "date": "04-Jun-2009", "high": 31.02, "low": 29.92, "open": 31.02, "ret": 4.51010886469673, "signal": "short"}, {"close": 29.62, "date": "05-Jun-2009", "high": 30.81, "low": 28.85, "open": 29.39, "ret": 6.08424336973478, "signal": "short"}, {"close": 29.77, "date": "08-Jun-2009", "high": 31.82, "low": 26.41, "open": 30.84, "ret": 1.2539184952978, "signal": "short"}, {"close": 28.27, "date": "09-Jun-2009", "high": 29.77, "low": 27.79, "open": 29.77, "ret": -5.02431118314424, "signal": "short"}, {"close": 28.46, "date": "10-Jun-2009", "high": 29.74, "low": 26.9, "open": 26.9, "ret": -5.46623794212217, "signal": "short"}, {"close": 28.11, "date": "11-Jun-2009", "high": 28.11, "low": 26.81, "open": 27.36, "ret": -8.3743842364532, "signal": "short"}, {"close": 28.15, "date": "12-Jun-2009", "high": 28.5, "low": 27.73, "open": 28.08, "ret": -5.52763819095477, "signal": "short"}, {"close": 30.81, "date": "15-Jun-2009", "high": 31.09, "low": 29.64, "open": 29.7, "ret": 3.4920634920635, "signal": "long"}, {"close": 32.68, "date": "16-Jun-2009", "high": 32.75, "low": 30.07, "open": 30.81, "ret": 0.155038759689914, "signal": "short"}, {"close": 31.54, "date": "17-Jun-2009", "high": 32.77, "low": 30.64, "open": 31.19, "ret": 5.82822085889571, "signal": "short"}, {"close": 30.03, "date": "18-Jun-2009", "high": 31.54, "low": 29.6, "open": 31.54, "ret": 8.17610062893082, "signal": "short"}, {"close": 27.99, "date": "19-Jun-2009", "high": 29.32, "low": 27.56, "open": 29.16, "ret": 8.59872611464968, "signal": "short"}, {"close": 31.17, "date": "22-Jun-2009", "high": 32.05, "low": 30.3, "open": 30.4, "ret": 15.4907975460123, "signal": "short"}, {"close": 30.58, "date": "23-Jun-2009", "high": 31.54, "low": 27.83, "open": 31.3, "ret": 11.7370892018779, "signal": "short"}, {"close": 29.05, "date": "24-Jun-2009", "high": 30.58, "low": 28.79, "open": 30.58, "ret": -10.4234527687296, "signal": "long"}, {"close": 26.36, "date": "25-Jun-2009", "high": 29.56, "low": 26.3, "open": 29.45, "ret": 0.0, "signal": "long"}, {"close": 25.93, "date": "26-Jun-2009", "high": 27.22, "low": 25.76, "open": 27.09, "ret": 0.0, "signal": "long"}, {"close": 25.35, "date": "29-Jun-2009", "high": 27.18, "low": 25.29, "open": 25.93, "ret": 5.26315789473684, "signal": "long"}, {"close": 26.35, "date": "30-Jun-2009", "high": 27.38, "low": 25.02, "open": 25.36, "ret": 6.73758865248228, "signal": "long"}]}, "mark": "bar", "encoding": {"color": {"condition": {"test": "datum.open < datum.close", "value": "#06982d"}, "value": "#ae1325"}, "x": {"type": "temporal", "field": "date", "timeUnit": "yearmonthdate"}, "y": {"type": "quantitative", "field": "open"}, "y2": {"type": "quantitative", "field": "close"}}}], "$schema": "https://vega.github.io/schema/vega-lite/v2.json"};
      var opt = {
        "mode": "vega-lite",
        "renderer": "canvas",
        "actions": {"editor": true, "source": true, "export": true}
      };
      vegaEmbed('#candlestick_chart-rst-altair-plot-0', {"config": {"view": {"width": 400, "height": 300}}, "layer": [{"data": {"values": [{"close": 30.04, "date": "01-Jun-2009", "high": 30.05, "low": 28.45, "open": 28.7, "ret": -4.89396411092985, "signal": "short"}, {"close": 29.63, "date": "02-Jun-2009", "high": 30.13, "low": 28.3, "open": 30.04, "ret": -0.322580645161295, "signal": "short"}, {"close": 31.02, "date": "03-Jun-2009", "high": 31.79, "low": 29.62, "open": 29.62, "ret": 3.68663594470045, "signal": "short"}, {"close": 30.18, "date": "04-Jun-2009", "high": 31.02, "low": 29.92, "open": 31.02, "ret": 4.51010886469673, "signal": "short"}, {"close": 29.62, "date": "05-Jun-2009", "high": 30.81, "low": 28.85, "open": 29.39, "ret": 6.08424336973478, "signal": "short"}, {"close": 29.77, "date": "08-Jun-2009", "high": 31.82, "low": 26.41, "open": 30.84, "ret": 1.2539184952978, "signal": "short"}, {"close": 28.27, "date": "09-Jun-2009", "high": 29.77, "low": 27.79, "open": 29.77, "ret": -5.02431118314424, "signal": "short"}, {"close": 28.46, "date": "10-Jun-2009", "high": 29.74, "low": 26.9, "open": 26.9, "ret": -5.46623794212217, "signal": "short"}, {"close": 28.11, "date": "11-Jun-2009", "high": 28.11, "low": 26.81, "open": 27.36, "ret": -8.3743842364532, "signal": "short"}, {"close": 28.15, "date": "12-Jun-2009", "high": 28.5, "low": 27.73, "open": 28.08, "ret": -5.52763819095477, "signal": "short"}, {"close": 30.81, "date": "15-Jun-2009", "high": 31.09, "low": 29.64, "open": 29.7, "ret": 3.4920634920635, "signal": "long"}, {"close": 32.68, "date": "16-Jun-2009", "high": 32.75, "low": 30.07, "open": 30.81, "ret": 0.155038759689914, "signal": "short"}, {"close": 31.54, "date": "17-Jun-2009", "high": 32.77, "low": 30.64, "open": 31.19, "ret": 5.82822085889571, "signal": "short"}, {"close": 30.03, "date": "18-Jun-2009", "high": 31.54, "low": 29.6, "open": 31.54, "ret": 8.17610062893082, "signal": "short"}, {"close": 27.99, "date": "19-Jun-2009", "high": 29.32, "low": 27.56, "open": 29.16, "ret": 8.59872611464968, "signal": "short"}, {"close": 31.17, "date": "22-Jun-2009", "high": 32.05, "low": 30.3, "open": 30.4, "ret": 15.4907975460123, "signal": "short"}, {"close": 30.58, "date": "23-Jun-2009", "high": 31.54, "low": 27.83, "open": 31.3, "ret": 11.7370892018779, "signal": "short"}, {"close": 29.05, "date": "24-Jun-2009", "high": 30.58, "low": 28.79, "open": 30.58, "ret": -10.4234527687296, "signal": "long"}, {"close": 26.36, "date": "25-Jun-2009", "high": 29.56, "low": 26.3, "open": 29.45, "ret": 0.0, "signal": "long"}, {"close": 25.93, "date": "26-Jun-2009", "high": 27.22, "low": 25.76, "open": 27.09, "ret": 0.0, "signal": "long"}, {"close": 25.35, "date": "29-Jun-2009", "high": 27.18, "low": 25.29, "open": 25.93, "ret": 5.26315789473684, "signal": "long"}, {"close": 26.35, "date": "30-Jun-2009", "high": 27.38, "low": 25.02, "open": 25.36, "ret": 6.73758865248228, "signal": "long"}]}, "mark": "rule", "encoding": {"color": {"condition": {"test": "datum.open < datum.close", "value": "#06982d"}, "value": "#ae1325"}, "x": {"type": "temporal", "axis": {"format": "%m/%d", "title": "Date in 2009"}, "field": "date", "scale": {"domain": [{"month": 5, "date": 31, "year": 2009}, {"month": 7, "date": 1, "year": 2009}]}, "timeUnit": "yearmonthdate"}, "y": {"type": "quantitative", "axis": {"title": "Price"}, "field": "low", "scale": {"zero": false}}, "y2": {"type": "quantitative", "field": "high"}}}, {"data": {"values": [{"close": 30.04, "date": "01-Jun-2009", "high": 30.05, "low": 28.45, "open": 28.7, "ret": -4.89396411092985, "signal": "short"}, {"close": 29.63, "date": "02-Jun-2009", "high": 30.13, "low": 28.3, "open": 30.04, "ret": -0.322580645161295, "signal": "short"}, {"close": 31.02, "date": "03-Jun-2009", "high": 31.79, "low": 29.62, "open": 29.62, "ret": 3.68663594470045, "signal": "short"}, {"close": 30.18, "date": "04-Jun-2009", "high": 31.02, "low": 29.92, "open": 31.02, "ret": 4.51010886469673, "signal": "short"}, {"close": 29.62, "date": "05-Jun-2009", "high": 30.81, "low": 28.85, "open": 29.39, "ret": 6.08424336973478, "signal": "short"}, {"close": 29.77, "date": "08-Jun-2009", "high": 31.82, "low": 26.41, "open": 30.84, "ret": 1.2539184952978, "signal": "short"}, {"close": 28.27, "date": "09-Jun-2009", "high": 29.77, "low": 27.79, "open": 29.77, "ret": -5.02431118314424, "signal": "short"}, {"close": 28.46, "date": "10-Jun-2009", "high": 29.74, "low": 26.9, "open": 26.9, "ret": -5.46623794212217, "signal": "short"}, {"close": 28.11, "date": "11-Jun-2009", "high": 28.11, "low": 26.81, "open": 27.36, "ret": -8.3743842364532, "signal": "short"}, {"close": 28.15, "date": "12-Jun-2009", "high": 28.5, "low": 27.73, "open": 28.08, "ret": -5.52763819095477, "signal": "short"}, {"close": 30.81, "date": "15-Jun-2009", "high": 31.09, "low": 29.64, "open": 29.7, "ret": 3.4920634920635, "signal": "long"}, {"close": 32.68, "date": "16-Jun-2009", "high": 32.75, "low": 30.07, "open": 30.81, "ret": 0.155038759689914, "signal": "short"}, {"close": 31.54, "date": "17-Jun-2009", "high": 32.77, "low": 30.64, "open": 31.19, "ret": 5.82822085889571, "signal": "short"}, {"close": 30.03, "date": "18-Jun-2009", "high": 31.54, "low": 29.6, "open": 31.54, "ret": 8.17610062893082, "signal": "short"}, {"close": 27.99, "date": "19-Jun-2009", "high": 29.32, "low": 27.56, "open": 29.16, "ret": 8.59872611464968, "signal": "short"}, {"close": 31.17, "date": "22-Jun-2009", "high": 32.05, "low": 30.3, "open": 30.4, "ret": 15.4907975460123, "signal": "short"}, {"close": 30.58, "date": "23-Jun-2009", "high": 31.54, "low": 27.83, "open": 31.3, "ret": 11.7370892018779, "signal": "short"}, {"close": 29.05, "date": "24-Jun-2009", "high": 30.58, "low": 28.79, "open": 30.58, "ret": -10.4234527687296, "signal": "long"}, {"close": 26.36, "date": "25-Jun-2009", "high": 29.56, "low": 26.3, "open": 29.45, "ret": 0.0, "signal": "long"}, {"close": 25.93, "date": "26-Jun-2009", "high": 27.22, "low": 25.76, "open": 27.09, "ret": 0.0, "signal": "long"}, {"close": 25.35, "date": "29-Jun-2009", "high": 27.18, "low": 25.29, "open": 25.93, "ret": 5.26315789473684, "signal": "long"}, {"close": 26.35, "date": "30-Jun-2009", "high": 27.38, "low": 25.02, "open": 25.36, "ret": 6.73758865248228, "signal": "long"}]}, "mark": "bar", "encoding": {"color": {"condition": {"test": "datum.open < datum.close", "value": "#06982d"}, "value": "#ae1325"}, "x": {"type": "temporal", "field": "date", "timeUnit": "yearmonthdate"}, "y": {"type": "quantitative", "field": "open"}, "y2": {"type": "quantitative", "field": "close"}}}], "$schema": "https://vega.github.io/schema/vega-lite/v2.json"}).catch(console.err);
  });
</script>
</div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">altair</span> <span class="kn">as</span> <span class="nn">alt</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
<span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;01-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">28.7</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">30.05</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">28.45</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">30.04</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">4.89396411092985</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;02-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">30.04</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">30.13</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">28.3</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">29.63</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.322580645161295</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;03-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">29.62</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">31.79</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">29.62</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">31.02</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="mf">3.68663594470045</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;04-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">31.02</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">31.02</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">29.92</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">30.18</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="mf">4.51010886469673</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;05-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">29.39</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">30.81</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">28.85</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">29.62</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="mf">6.08424336973478</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;08-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">30.84</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">31.82</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">26.41</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">29.77</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="mf">1.2539184952978</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;09-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">29.77</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">29.77</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">27.79</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">28.27</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">5.02431118314424</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;10-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">26.9</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">29.74</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">26.9</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">28.46</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">5.46623794212217</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;11-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">27.36</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">28.11</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">26.81</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">28.11</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">8.3743842364532</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;12-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">28.08</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">28.5</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">27.73</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">28.15</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">5.52763819095477</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;15-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">29.7</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">31.09</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">29.64</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">30.81</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;long&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="mf">3.4920634920635</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;16-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">30.81</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">32.75</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">30.07</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">32.68</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="mf">0.155038759689914</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;17-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">31.19</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">32.77</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">30.64</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">31.54</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="mf">5.82822085889571</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;18-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">31.54</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">31.54</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">29.6</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">30.03</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="mf">8.17610062893082</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;19-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">29.16</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">29.32</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">27.56</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">27.99</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="mf">8.59872611464968</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;22-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">30.4</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">32.05</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">30.3</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">31.17</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="mf">15.4907975460123</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;23-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">31.3</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">31.54</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">27.83</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">30.58</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;short&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="mf">11.7370892018779</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;24-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">30.58</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">30.58</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">28.79</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">29.05</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;long&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mf">10.4234527687296</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;25-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">29.45</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">29.56</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">26.3</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">26.36</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;long&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="mi">0</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;26-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">27.09</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">27.22</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">25.76</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">25.93</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;long&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="mi">0</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;29-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">25.93</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">27.18</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">25.29</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">25.35</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;long&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="mf">5.26315789473684</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;30-Jun-2009&quot;</span><span class="p">,</span>
        <span class="s2">&quot;open&quot;</span><span class="p">:</span> <span class="mf">25.36</span><span class="p">,</span>
        <span class="s2">&quot;high&quot;</span><span class="p">:</span> <span class="mf">27.38</span><span class="p">,</span>
        <span class="s2">&quot;low&quot;</span><span class="p">:</span> <span class="mf">25.02</span><span class="p">,</span>
        <span class="s2">&quot;close&quot;</span><span class="p">:</span> <span class="mf">26.35</span><span class="p">,</span>
        <span class="s2">&quot;signal&quot;</span><span class="p">:</span> <span class="s2">&quot;long&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ret&quot;</span><span class="p">:</span> <span class="mf">6.73758865248228</span>
      <span class="p">}</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="n">open_close_color</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">condition</span><span class="p">(</span><span class="s2">&quot;datum.open &lt; datum.close&quot;</span><span class="p">,</span>
                                 <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;#06982d&quot;</span><span class="p">),</span>
                                 <span class="n">alt</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="s2">&quot;#ae1325&quot;</span><span class="p">))</span>

<span class="n">rule</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_rule</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span>
        <span class="s1">&#39;date:T&#39;</span><span class="p">,</span>
        <span class="n">timeUnit</span><span class="o">=</span><span class="s1">&#39;yearmonthdate&#39;</span><span class="p">,</span>
        <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">domain</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;month&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="mi">31</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2009</span><span class="p">},</span>
                                <span class="p">{</span><span class="s2">&quot;month&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;year&quot;</span><span class="p">:</span> <span class="mi">2009</span><span class="p">}]),</span>
        <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s1">&#39;%m/</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Date in 2009&#39;</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y</span><span class="p">(</span>
        <span class="s1">&#39;low&#39;</span><span class="p">,</span>
        <span class="n">scale</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">zero</span><span class="o">=</span><span class="bp">False</span><span class="p">),</span>
        <span class="n">axis</span><span class="o">=</span><span class="n">alt</span><span class="o">.</span><span class="n">Axis</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Price&#39;</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">Y2</span><span class="p">(</span><span class="s1">&#39;high&#39;</span><span class="p">),</span>
    <span class="n">color</span><span class="o">=</span><span class="n">open_close_color</span>
<span class="p">)</span>

<span class="n">bar</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">alt</span><span class="o">.</span><span class="n">X</span><span class="p">(</span><span class="s1">&#39;date:T&#39;</span><span class="p">,</span> <span class="n">timeUnit</span><span class="o">=</span><span class="s1">&#39;yearmonthdate&#39;</span><span class="p">),</span>
    <span class="n">y</span><span class="o">=</span><span class="s1">&#39;open&#39;</span><span class="p">,</span>
    <span class="n">y2</span><span class="o">=</span><span class="s1">&#39;close&#39;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="n">open_close_color</span>
<span class="p">)</span>

<span class="n">chart</span> <span class="o">=</span> <span class="n">rule</span> <span class="o">+</span> <span class="n">bar</span>
</pre></div>
</div>
<div class="toctree-wrapper compound">
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="connected_scatterplot.html" class="btn btn-neutral float-right" title="Connected Scatterplot (Lines with Custom Paths)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="boxplot_max_min.html" class="btn btn-neutral" title="Box Plot with Min/Max Whiskers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016-2018, Altair Developers.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.0.0rc1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega@3.2"></script>
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-lite@2.3"></script>
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/vega-embed@3"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
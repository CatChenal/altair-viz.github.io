{"spec": {"config": {"mark": {"stacked": "normalize"}}, "mark": "bar", "encoding": {"y": {"type": "quantitative", "axis": {"title": "population"}, "aggregate": "sum", "field": "people"}, "color": {"type": "nominal", "scale": {"range": ["#EA98D2", "#659CCA"]}, "field": "gender"}, "x": {"type": "ordinal", "scale": {"bandSize": 17.0}, "field": "age"}}, "transform": {"filter": "datum.year == 2000", "calculate": [{"expr": "datum.sex == 2 ? \"Female\" : \"Male\"", "field": "gender"}]}, "data": {"url": "//vega.github.io/vega-lite/data/population.json"}}, "actions": {"source": false, "export": false, "editor": true}, "mode": "vega-lite"}
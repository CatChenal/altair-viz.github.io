<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Altair Documentation &mdash; altair 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/altair-gallery.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://d3js.org/d3.v3.min.js"></script>
    <script type="text/javascript" src="https://vega.github.io/vega/vega.js"></script>
    <script type="text/javascript" src="https://vega.github.io/vega-lite/vega-lite.js"></script>
    <script type="text/javascript" src="https://vega.github.io/vega-editor/vendor/vega-embed.js"></script>
    <link rel="top" title="altair 1.0.0 documentation" href="index.html" />
    <link rel="next" title="Altair Plot Recipes" href="recipes.html" />
    <link rel="prev" title="Layered Bar Chart" href="gallery/bar_layered_transparent.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="altair-documentation">
<span id="api-documentation"></span><h1>Altair Documentation<a class="headerlink" href="#altair-documentation" title="Permalink to this headline">¶</a></h1>
<p>Altair&#8217;s core functionality is to produce Vega-Lite JSON specifications, which
specify <a class="reference internal" href="#encoding-reference"><span class="std std-ref">mappings</span></a> between <a class="reference internal" href="#defining-data"><span class="std std-ref">data</span></a> and <a class="reference internal" href="#mark-reference"><span class="std std-ref">graphical markings</span></a>.</p>
<div class="section" id="data-in-altair">
<span id="defining-data"></span><h2>Data in Altair<a class="headerlink" href="#data-in-altair" title="Permalink to this headline">¶</a></h2>
<p>Each top-level chart object, including <a class="reference internal" href="API.html#altair.Chart" title="altair.Chart"><code class="xref py py-class docutils literal"><span class="pre">Chart</span></code></a>, <a class="reference internal" href="API.html#altair.LayeredChart" title="altair.LayeredChart"><code class="xref py py-class docutils literal"><span class="pre">LayeredChart</span></code></a>,
and <a class="reference internal" href="API.html#altair.FacetedChart" title="altair.FacetedChart"><code class="xref py py-class docutils literal"><span class="pre">FacetedChart</span></code></a>, can take a dataset as its first argument.
The dataset can be specified in one of three ways:</p>
<ul class="simple">
<li>as a <a class="reference external" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html">Pandas DataFrame</a></li>
<li>as a <a class="reference internal" href="API.html#altair.Data" title="altair.Data"><code class="xref py py-class docutils literal"><span class="pre">Data</span></code></a> object</li>
<li>as a url pointing to a <code class="docutils literal"><span class="pre">json</span></code> or <code class="docutils literal"><span class="pre">csv</span></code> formatted text file</li>
</ul>
<p>For example, here we specify data via a dataframe:</p>
<div class="highlight-python" id="documentation-rst-altair-source-0"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">altair</span> <span class="kn">import</span> <span class="n">Chart</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;E&#39;</span><span class="p">],</span>
                     <span class="s">&#39;y&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">]})</span>
<span class="n">Chart</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>

<div id="documentation-rst-altair-plot-0">
<script>
  vg.embed("#documentation-rst-altair-plot-0", "documentation-rst-altair-plot-0.vl.json", function(error, result) {});
</script>
</div><p>When data is specified as a DataFrame, the encoding is quite simple, as Altair
uses the data type information provided by Pandas to automatically determine
the data types required in the encoding.</p>
<p>By comparison, here we create the same chart using a <a class="reference internal" href="API.html#altair.Data" title="altair.Data"><code class="xref py py-class docutils literal"><span class="pre">Data</span></code></a> object,
with the data specified as a JSON-style list of records:</p>
<div class="highlight-python" id="documentation-rst-altair-source-1"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">altair</span> <span class="kn">import</span> <span class="n">Chart</span><span class="p">,</span> <span class="n">Data</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="p">[{</span><span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">:</span> <span class="mi">6</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>
                    <span class="p">{</span><span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}])</span>
<span class="n">Chart</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s">&#39;x:O&#39;</span><span class="p">,</span>  <span class="c"># specify ordinal data</span>
    <span class="n">y</span><span class="o">=</span><span class="s">&#39;y:Q&#39;</span><span class="p">,</span>  <span class="c"># specify quantitative data</span>
<span class="p">)</span>
</pre></div>
</div>

<div id="documentation-rst-altair-plot-1">
<script>
  vg.embed("#documentation-rst-altair-plot-1", "documentation-rst-altair-plot-1.vl.json", function(error, result) {});
</script>
</div><p>notice the extra markup required in the encoding; because Altair cannot infer
the types within a <a class="reference internal" href="API.html#altair.Data" title="altair.Data"><code class="xref py py-class docutils literal"><span class="pre">Data</span></code></a> object, we must specify them manually
(here we use <a class="reference internal" href="#shorthand-description"><span class="std std-ref">Encoding Shorthands</span></a> to specify <em>ordinal</em> (<code class="docutils literal"><span class="pre">O</span></code>) for <code class="docutils literal"><span class="pre">x</span></code>
and <em>quantitative</em> (<code class="docutils literal"><span class="pre">Q</span></code>) for <code class="docutils literal"><span class="pre">y</span></code>; see <a class="reference internal" href="#data-types"><span class="std std-ref">Data Types</span></a> below).</p>
<p>Similarly, we must also specify the data type when referencing data by URL:</p>
<div class="highlight-python" id="documentation-rst-altair-source-2"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">altair</span> <span class="kn">import</span> <span class="n">Chart</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">&#39;https://vega.github.io/vega-datasets/data/cars.json&#39;</span>

<span class="n">Chart</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s">&#39;Horsepower:Q&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s">&#39;Miles_per_Gallon:Q&#39;</span>
<span class="p">)</span>
</pre></div>
</div>

<div id="documentation-rst-altair-plot-2">
<script>
  vg.embed("#documentation-rst-altair-plot-2", "documentation-rst-altair-plot-2.vl.json", function(error, result) {});
</script>
</div><p>We will further discuss encodings and associated types below.</p>
</div>
<div class="section" id="encodings">
<span id="encoding-reference"></span><h2>Encodings<a class="headerlink" href="#encodings" title="Permalink to this headline">¶</a></h2>
<p>The key to creating meaningful visualizations is to map <em>properties of the data</em>
to <em>visual properties</em> in order to effectively communicate information.
Altair abstracts this mapping through the idea of <em>channel encodings</em>.
For example, here we will plot the <em>cars</em> dataset using four of the available
channel encodings: <code class="docutils literal"><span class="pre">x</span></code> (the x-axis value), <code class="docutils literal"><span class="pre">y</span></code> (the y-axis value),
<code class="docutils literal"><span class="pre">color</span></code> (the color of the marker), and <code class="docutils literal"><span class="pre">shape</span></code> (the shape of the point marker):</p>
<div class="highlight-python" id="documentation-rst-altair-source-3"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">altair</span> <span class="kn">import</span> <span class="n">Chart</span><span class="p">,</span> <span class="n">load_dataset</span>

<span class="n">cars</span> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span><span class="s">&#39;cars&#39;</span><span class="p">)</span>

<span class="n">Chart</span><span class="p">(</span><span class="n">cars</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s">&#39;Horsepower&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s">&#39;Miles_per_Gallon&#39;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s">&#39;Origin&#39;</span><span class="p">,</span>
    <span class="n">shape</span><span class="o">=</span><span class="s">&#39;Origin&#39;</span>
<span class="p">)</span>
</pre></div>
</div>

<div id="documentation-rst-altair-plot-3">
<script>
  vg.embed("#documentation-rst-altair-plot-3", "documentation-rst-altair-plot-3.vl.json", function(error, result) {});
</script>
</div><p>Altair automatically determines the correct datatype from the Data Frame columns,
and creates appropriate scales and legends to represent the data.</p>
<div class="section" id="channels">
<span id="encoding-channels"></span><h3>Channels<a class="headerlink" href="#channels" title="Permalink to this headline">¶</a></h3>
<p>Altair provides a number of encoding channels that can be useful in different
circumstances; the following table summarizes them:</p>
<p><em>TODO: link to examples of each</em></p>
<p>Position Channels:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="19%" />
<col width="33%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Channel</th>
<th class="head">Altair Class</th>
<th class="head">Description</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>column</td>
<td><a class="reference internal" href="API.html#altair.Column" title="altair.Column"><code class="xref py py-class docutils literal"><span class="pre">Column</span></code></a></td>
<td>The column of a faceted plot</td>
<td><a class="reference internal" href="gallery/trellis_stacked_bar.html#gallery-trellis-stacked-bar"><span class="std std-ref">Trellis Stacked Bar Chart</span></a></td>
</tr>
<tr class="row-odd"><td>row</td>
<td><a class="reference internal" href="API.html#altair.Row" title="altair.Row"><code class="xref py py-class docutils literal"><span class="pre">Row</span></code></a></td>
<td>The row of a faceted plot</td>
<td><a class="reference internal" href="gallery/trellis_barley.html#gallery-trellis-barley"><span class="std std-ref">Becker&#8217;s Barley Trellis Plot</span></a></td>
</tr>
<tr class="row-even"><td>x</td>
<td><a class="reference internal" href="API.html#altair.X" title="altair.X"><code class="xref py py-class docutils literal"><span class="pre">X</span></code></a></td>
<td>The x-axis value</td>
<td><a class="reference internal" href="gallery/scatter.html#gallery-scatter"><span class="std std-ref">Scatterplot</span></a></td>
</tr>
<tr class="row-odd"><td>y</td>
<td><a class="reference internal" href="API.html#altair.Y" title="altair.Y"><code class="xref py py-class docutils literal"><span class="pre">Y</span></code></a></td>
<td>The y-axis value</td>
<td><a class="reference internal" href="gallery/circle.html#gallery-circle"><span class="std std-ref">Scatterplot with Filled Circles</span></a></td>
</tr>
</tbody>
</table>
<p>Channels with Legend:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="18%" />
<col width="27%" />
<col width="47%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Channel</th>
<th class="head">Altair Class</th>
<th class="head">Description</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>color</td>
<td><a class="reference internal" href="API.html#altair.Color" title="altair.Color"><code class="xref py py-class docutils literal"><span class="pre">Color</span></code></a></td>
<td>The color of the mark</td>
<td><a class="reference internal" href="gallery/stacked_area.html#gallery-stacked-area"><span class="std std-ref">Stacked Area Chart</span></a></td>
</tr>
<tr class="row-odd"><td>opacity</td>
<td><a class="reference internal" href="API.html#altair.Opacity" title="altair.Opacity"><code class="xref py py-class docutils literal"><span class="pre">Opacity</span></code></a></td>
<td>The opacity of the mark</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>shape</td>
<td><a class="reference internal" href="API.html#altair.Shape" title="altair.Shape"><code class="xref py py-class docutils literal"><span class="pre">Shape</span></code></a></td>
<td>The shape of the mark</td>
<td><a class="reference internal" href="gallery/scatter_colored_with_shape.html#gallery-scatter-colored-with-shape"><span class="std std-ref">Colored Scatterplot</span></a></td>
</tr>
<tr class="row-odd"><td>size</td>
<td><a class="reference internal" href="API.html#altair.Size" title="altair.Size"><code class="xref py py-class docutils literal"><span class="pre">Size</span></code></a></td>
<td>The size of the mark</td>
<td><a class="reference internal" href="gallery/scatter_binned.html#gallery-scatter-binned"><span class="std std-ref">Binned Scatterplot</span></a></td>
</tr>
</tbody>
</table>
<p>Order Channels:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="19%" />
<col width="52%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Channel</th>
<th class="head">Altair Class</th>
<th class="head">Description</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>order</td>
<td><a class="reference internal" href="API.html#altair.Order" title="altair.Order"><code class="xref py py-class docutils literal"><span class="pre">Order</span></code></a></td>
<td>&#8211;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>path</td>
<td><a class="reference internal" href="API.html#altair.Path" title="altair.Path"><code class="xref py py-class docutils literal"><span class="pre">Path</span></code></a></td>
<td>&#8211;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Field Channels:</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="16%" />
<col width="43%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Channel</th>
<th class="head">Altair Class</th>
<th class="head">Description</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>text</td>
<td><a class="reference internal" href="API.html#altair.Text" title="altair.Text"><code class="xref py py-class docutils literal"><span class="pre">Text</span></code></a></td>
<td>The text to display at each mark</td>
<td><a class="reference internal" href="gallery/text_scatter_colored.html#gallery-text-scatter-colored"><span class="std std-ref">Colored Text Scatter Plot</span></a></td>
</tr>
<tr class="row-odd"><td>detail</td>
<td><a class="reference internal" href="API.html#altair.Detail" title="altair.Detail"><code class="xref py py-class docutils literal"><span class="pre">Detail</span></code></a></td>
<td>Additional level of detail for a grouping,
without mapping to any particular channel</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>label</td>
<td><a class="reference internal" href="API.html#altair.Label" title="altair.Label"><code class="xref py py-class docutils literal"><span class="pre">Label</span></code></a></td>
<td>&#8211;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="data-types">
<span id="id1"></span><h3>Data Types<a class="headerlink" href="#data-types" title="Permalink to this headline">¶</a></h3>
<p>The details of any mapping depend on the <em>type</em> of the data. Altair recognizes
four main data types:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="19%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Data Type</th>
<th class="head">Shorthand Code</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>quantitative</td>
<td><code class="docutils literal"><span class="pre">Q</span></code></td>
<td>a continuous real-valued quantity</td>
</tr>
<tr class="row-odd"><td>ordinal</td>
<td><code class="docutils literal"><span class="pre">O</span></code></td>
<td>a discrete ordered quantity</td>
</tr>
<tr class="row-even"><td>nominal</td>
<td><code class="docutils literal"><span class="pre">N</span></code></td>
<td>a discrete unordered category</td>
</tr>
<tr class="row-odd"><td>temporal</td>
<td><code class="docutils literal"><span class="pre">T</span></code></td>
<td>a time or date value</td>
</tr>
</tbody>
</table>
<p>These types can either be expressed in a long-form using the channel encoding
classes such as <a class="reference internal" href="API.html#altair.X" title="altair.X"><code class="xref py py-class docutils literal"><span class="pre">X</span></code></a> and <a class="reference internal" href="API.html#altair.Y" title="altair.Y"><code class="xref py py-class docutils literal"><span class="pre">Y</span></code></a>, or in short-form using the
<a class="reference internal" href="#shorthand-description"><span class="std std-ref">Shorthand Syntax</span></a> discussed below.
For example, the following two means of specifying the type result in identical
plot specifications:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">altair</span> <span class="k">import</span> <span class="n">Chart</span><span class="p">,</span> <span class="n">X</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">x</span><span class="o">=</span><span class="n">X</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">&#39;quantitative&#39;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">chart</span><span class="o">.</span><span class="n">to_json</span><span class="p">())</span>
<span class="go">{&quot;encoding&quot;: {&quot;x&quot;: {&quot;field&quot;: &quot;name&quot;, &quot;type&quot;: &quot;quantitative&quot;}}}</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">chart</span> <span class="o">=</span> <span class="n">Chart</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
<span class="gp">... </span>            <span class="n">x</span><span class="o">=</span><span class="s">&#39;name:Q&#39;</span>
<span class="gp">... </span>        <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">chart</span><span class="o">.</span><span class="n">to_json</span><span class="p">())</span>
<span class="go">{&quot;encoding&quot;: {&quot;x&quot;: {&quot;field&quot;: &quot;name&quot;, &quot;type&quot;: &quot;quantitative&quot;}}}</span>
</pre></div>
</div>
<p>The shorthand form, <code class="docutils literal"><span class="pre">&quot;name:Q&quot;</span></code>, is useful for its lack of boilerplate
when doing quick data explorations. The long-form,
<code class="docutils literal"><span class="pre">X('name',</span> <span class="pre">type='quantitative')</span></code>, is useful when adjusting binning, axis
properties, and other details of the mapping.</p>
<p>Specifying the correct type for your data is important, as it affects the
way Altair represents your encoding in the resulting plot.
As an example of this, here we will represent the same data three different ways,
with the color encoded as a <em>quantitative</em>, <em>ordinal</em>, and <em>nominal</em> type:</p>
<p><em>TODO: use subplots here</em></p>
<div class="highlight-python" id="documentation-rst-altair-source-5"><span id="altair-plot-4"></span><div class="highlight"><pre><span class="n">Chart</span><span class="p">(</span><span class="n">cars</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s">&#39;Horsepower:Q&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s">&#39;Miles_per_Gallon:Q&#39;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s">&#39;Cylinders:Q&#39;</span>           <span class="c"># Encode as quantitative (Q)</span>
<span class="p">)</span>
</pre></div>
</div>

<div id="documentation-rst-altair-plot-5">
<script>
  vg.embed("#documentation-rst-altair-plot-5", "documentation-rst-altair-plot-5.vl.json", function(error, result) {});
</script>
</div><div class="highlight-python" id="documentation-rst-altair-source-6"><div class="highlight"><pre><span class="n">Chart</span><span class="p">(</span><span class="n">cars</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s">&#39;Horsepower:Q&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s">&#39;Miles_per_Gallon:Q&#39;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s">&#39;Cylinders:O&#39;</span>           <span class="c"># Encode as ordinal (O)</span>
<span class="p">)</span>
</pre></div>
</div>

<div id="documentation-rst-altair-plot-6">
<script>
  vg.embed("#documentation-rst-altair-plot-6", "documentation-rst-altair-plot-6.vl.json", function(error, result) {});
</script>
</div><div class="highlight-python" id="documentation-rst-altair-source-7"><div class="highlight"><pre><span class="n">Chart</span><span class="p">(</span><span class="n">cars</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s">&#39;Horsepower:Q&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s">&#39;Miles_per_Gallon:Q&#39;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s">&#39;Cylinders:N&#39;</span>           <span class="c"># Encode as nominal (N)</span>
<span class="p">)</span>
</pre></div>
</div>

<div id="documentation-rst-altair-plot-7">
<script>
  vg.embed("#documentation-rst-altair-plot-7", "documentation-rst-altair-plot-7.vl.json", function(error, result) {});
</script>
</div><p>The type specification influences the way Altair, via Vega-Lite, chooses
a color scale to represent the value, and influences whether a discrete
or continuous legend is used.</p>
</div>
<div class="section" id="binning-and-aggregation">
<span id="encoding-aggregates"></span><h3>Binning and Aggregation<a class="headerlink" href="#binning-and-aggregation" title="Permalink to this headline">¶</a></h3>
<p>Beyond simple channel encodings, Altair&#8217;s visualizations are built on the
concept of the database-style grouping and aggregation; that is, the
<a class="reference external" href="https://www.jstatsoft.org/article/view/v040i01">split-apply-combine</a>
abstraction that underpins many data analyses.</p>
<p>For example, building a histogram from a one-dimensional dataset involves
splitting data based on the bin it falls in, aggregating the results within
each bin using a <em>count</em> of the data, and then combining the results into
a final figure.</p>
<p>In altair, such an operation looks like this:</p>
<div class="highlight-python" id="documentation-rst-altair-source-8"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">altair</span> <span class="kn">import</span> <span class="n">load_dataset</span><span class="p">,</span> <span class="n">Chart</span><span class="p">,</span> <span class="n">X</span>

<span class="n">cars</span> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span><span class="s">&#39;cars&#39;</span><span class="p">)</span>

<span class="n">Chart</span><span class="p">(</span><span class="n">cars</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">X</span><span class="p">(</span><span class="s">&#39;Horsepower&#39;</span><span class="p">,</span> <span class="nb">bin</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
    <span class="n">y</span><span class="o">=</span><span class="s">&#39;count(*):Q&#39;</span>
    <span class="c"># could also use Y(&#39;*&#39;, aggregate=&#39;count&#39;, type=&#39;quantitative&#39;)</span>
<span class="p">)</span>
</pre></div>
</div>

<div id="documentation-rst-altair-plot-8">
<script>
  vg.embed("#documentation-rst-altair-plot-8", "documentation-rst-altair-plot-8.vl.json", function(error, result) {});
</script>
</div><p>Notice here we use the shorthand version of expressing an encoding channel
(see <a class="reference internal" href="#shorthand-description"><span class="std std-ref">Encoding Shorthands</span></a>) with the <code class="docutils literal"><span class="pre">count</span></code> aggregation,
the special <code class="docutils literal"><span class="pre">*</span></code> wild-card identifier often used with counts,
and <code class="docutils literal"><span class="pre">Q</span></code> for quantitative type.</p>
<p>Similarly, we can create a two-dimensional histogram using, for example, the
size of points to indicate counts within the grid (sometimes called
a &#8220;Bubble Plot&#8221;):</p>
<div class="highlight-python" id="documentation-rst-altair-source-9"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">altair</span> <span class="kn">import</span> <span class="n">load_dataset</span><span class="p">,</span> <span class="n">Chart</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">Y</span>

<span class="n">cars</span> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span><span class="s">&#39;cars&#39;</span><span class="p">)</span>

<span class="n">Chart</span><span class="p">(</span><span class="n">cars</span><span class="p">)</span><span class="o">.</span><span class="n">mark_point</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">X</span><span class="p">(</span><span class="s">&#39;Horsepower&#39;</span><span class="p">,</span> <span class="nb">bin</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
    <span class="n">Y</span><span class="p">(</span><span class="s">&#39;Miles_per_Gallon&#39;</span><span class="p">,</span> <span class="nb">bin</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
    <span class="n">size</span><span class="o">=</span><span class="s">&#39;count(*):Q&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>

<div id="documentation-rst-altair-plot-9">
<script>
  vg.embed("#documentation-rst-altair-plot-9", "documentation-rst-altair-plot-9.vl.json", function(error, result) {});
</script>
</div><p>There is no need, however, to limit aggregations to counts alone. For example,
we could similarly create a plot where the color of each point
represents the mean of a third quantity, such as acceleration:</p>
<div class="highlight-python" id="documentation-rst-altair-source-10"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">altair</span> <span class="kn">import</span> <span class="n">load_dataset</span><span class="p">,</span> <span class="n">Chart</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">Y</span>

<span class="n">cars</span> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span><span class="s">&#39;cars&#39;</span><span class="p">)</span>

<span class="n">Chart</span><span class="p">(</span><span class="n">cars</span><span class="p">)</span><span class="o">.</span><span class="n">mark_circle</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">X</span><span class="p">(</span><span class="s">&#39;Horsepower&#39;</span><span class="p">,</span> <span class="nb">bin</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
    <span class="n">Y</span><span class="p">(</span><span class="s">&#39;Miles_per_Gallon&#39;</span><span class="p">,</span> <span class="nb">bin</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
    <span class="n">size</span><span class="o">=</span><span class="s">&#39;count(*):Q&#39;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="s">&#39;average(Acceleration):Q&#39;</span>
<span class="p">)</span>
</pre></div>
</div>

<div id="documentation-rst-altair-plot-10">
<script>
  vg.embed("#documentation-rst-altair-plot-10", "documentation-rst-altair-plot-10.vl.json", function(error, result) {});
</script>
</div><p>In addition to <code class="docutils literal"><span class="pre">count</span></code> and <code class="docutils literal"><span class="pre">average</span></code>, there are a large number of available
aggregation functions built into Altair; they are listed in the following table:</p>
<p><em>TODO: fill-in examples</em></p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="49%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Aggregate</th>
<th class="head">Description</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>sum</td>
<td>Sum of values</td>
<td><a class="reference internal" href="gallery/bar_aggregate.html#gallery-bar-aggregate"><span class="std std-ref">Aggregate Bar Chart</span></a></td>
</tr>
<tr class="row-odd"><td>mean</td>
<td>Arithmetic mean of values</td>
<td><a class="reference internal" href="gallery/text_table_heatmap.html#gallery-text-table-heatmap"><span class="std std-ref">Text Table Heatmap</span></a></td>
</tr>
<tr class="row-even"><td>average</td>
<td>Arithmetic mean of values</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>count</td>
<td>Total number of values</td>
<td><a class="reference internal" href="gallery/scatter_binned.html#gallery-scatter-binned"><span class="std std-ref">Binned Scatterplot</span></a></td>
</tr>
<tr class="row-even"><td>distinct</td>
<td>Number of distinct values</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>variance</td>
<td>Variance of values</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>variancep</td>
<td>??</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>stdev</td>
<td>Standard Deviation of values</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>stdevp</td>
<td>??</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>median</td>
<td>Median of values</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>q1</td>
<td>First quartile of values</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>q3</td>
<td>Third quartile of values</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>modeskew</td>
<td>??</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>min</td>
<td>Minimum value</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>max</td>
<td>Maximum value</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>argmin</td>
<td>Index of minimum value</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>argmax</td>
<td>Index of maximum value</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>values</td>
<td>??</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>valid</td>
<td>??</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>missing</td>
<td>??</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="encoding-shorthands">
<span id="shorthand-description"></span><h3>Encoding Shorthands<a class="headerlink" href="#encoding-shorthands" title="Permalink to this headline">¶</a></h3>
<p>For convenience, Altair allows the specification of the variable name along
with the aggregate and type within a simple shorthand string syntax.
This makes use of the type shorthand codes listed in <a class="reference internal" href="#data-types"><span class="std std-ref">Data Types</span></a>
as well as the aggregate names listed in <a class="reference internal" href="#encoding-aggregates"><span class="std std-ref">Binning and Aggregation</span></a>.
The following table shows examples of the shorthand specification alongside
the long-form equivalent:</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Shorthand</th>
<th class="head">Equivalent long-form</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">x='name'</span></code></td>
<td><code class="docutils literal"><span class="pre">X('name')</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">x='name:Q'</span></code></td>
<td><code class="docutils literal"><span class="pre">X('name',</span> <span class="pre">type='quantitative')</span></code></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">x='sum(name)'</span></code></td>
<td><code class="docutils literal"><span class="pre">X('name',</span> <span class="pre">aggregate='sum')</span></code></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">x='sum(name):Q'</span></code></td>
<td><code class="docutils literal"><span class="pre">X('name',</span> <span class="pre">aggregate='sum',</span> <span class="pre">type='quantitative')</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="marks">
<span id="mark-reference"></span><h2>Marks<a class="headerlink" href="#marks" title="Permalink to this headline">¶</a></h2>
<p>The chart encoding maps data columns to visual plot attributes; the <code class="docutils literal"><span class="pre">mark</span></code>
property specifies how those attributes should be represented.
Altair provides a number of mark properties:</p>
<p><em>TODO: fill-in examples</em></p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="21%" />
<col width="41%" />
<col width="29%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Mark Name</th>
<th class="head">Method</th>
<th class="head">Description</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>area</td>
<td><a class="reference internal" href="API.html#altair.Chart.mark_area" title="altair.Chart.mark_area"><code class="xref py py-meth docutils literal"><span class="pre">mark_area()</span></code></a></td>
<td>A filled area plot.</td>
<td><a class="reference internal" href="gallery/area.html#gallery-area"><span class="std std-ref">Area Chart</span></a></td>
</tr>
<tr class="row-odd"><td>bar</td>
<td><a class="reference internal" href="API.html#altair.Chart.mark_bar" title="altair.Chart.mark_bar"><code class="xref py py-meth docutils literal"><span class="pre">mark_bar()</span></code></a></td>
<td>A bar plot.</td>
<td><a class="reference internal" href="gallery/bar_aggregate.html#gallery-bar-aggregate"><span class="std std-ref">Aggregate Bar Chart</span></a></td>
</tr>
<tr class="row-even"><td>circle</td>
<td><a class="reference internal" href="API.html#altair.Chart.mark_circle" title="altair.Chart.mark_circle"><code class="xref py py-meth docutils literal"><span class="pre">mark_circle()</span></code></a></td>
<td>A scatter plot with filled circles.</td>
<td><a class="reference internal" href="gallery/bubble_health_income.html#gallery-bubble-health-income"><span class="std std-ref">Gapminder Bubble Plot</span></a></td>
</tr>
<tr class="row-odd"><td>line</td>
<td><a class="reference internal" href="API.html#altair.Chart.mark_line" title="altair.Chart.mark_line"><code class="xref py py-meth docutils literal"><span class="pre">mark_line()</span></code></a></td>
<td>A line plot.</td>
<td><a class="reference internal" href="gallery/line_color.html#gallery-line-color"><span class="std std-ref">Multi Series Line Chart</span></a></td>
</tr>
<tr class="row-even"><td>point</td>
<td><a class="reference internal" href="API.html#altair.Chart.mark_point" title="altair.Chart.mark_point"><code class="xref py py-meth docutils literal"><span class="pre">mark_point()</span></code></a></td>
<td>A scatter plot with configurable point shapes.</td>
<td><a class="reference internal" href="gallery/scatter_binned.html#gallery-scatter-binned"><span class="std std-ref">Binned Scatterplot</span></a></td>
</tr>
<tr class="row-odd"><td>rule</td>
<td><a class="reference internal" href="API.html#altair.Chart.mark_rule" title="altair.Chart.mark_rule"><code class="xref py py-meth docutils literal"><span class="pre">mark_rule()</span></code></a></td>
<td>A vertical or horizontal line spanning the axis.</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>square</td>
<td><a class="reference internal" href="API.html#altair.Chart.mark_square" title="altair.Chart.mark_square"><code class="xref py py-meth docutils literal"><span class="pre">mark_square()</span></code></a></td>
<td>A scatter plot with filled squares.</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>text</td>
<td><a class="reference internal" href="API.html#altair.Chart.mark_text" title="altair.Chart.mark_text"><code class="xref py py-meth docutils literal"><span class="pre">mark_text()</span></code></a></td>
<td>A scatter plot with points represented by text</td>
<td><a class="reference internal" href="gallery/text_scatter_colored.html#gallery-text-scatter-colored"><span class="std std-ref">Colored Text Scatter Plot</span></a></td>
</tr>
<tr class="row-even"><td>tick</td>
<td><a class="reference internal" href="API.html#altair.Chart.mark_tick" title="altair.Chart.mark_tick"><code class="xref py py-meth docutils literal"><span class="pre">mark_tick()</span></code></a></td>
<td>A vertical or horizontal tick mark.</td>
<td><a class="reference internal" href="gallery/tick_strip.html#gallery-tick-strip"><span class="std std-ref">Strip Plot</span></a></td>
</tr>
</tbody>
</table>
<p>In Altair, marks can be most conveniently specified by the <code class="docutils literal"><span class="pre">mark_*</span></code> methods
of the Chart object, which take optional keyword arguments that are passed
to <a class="reference internal" href="API.html#altair.MarkConfig" title="altair.MarkConfig"><code class="xref py py-class docutils literal"><span class="pre">MarkConfig</span></code></a> to configure the look of the marks.
For example, the following uses <a class="reference internal" href="API.html#altair.Chart.mark_circle" title="altair.Chart.mark_circle"><code class="xref py py-meth docutils literal"><span class="pre">mark_circle()</span></code></a> to represent
points as red semi-transparent filled circles:</p>
<div class="highlight-python" id="documentation-rst-altair-source-11"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">altair</span> <span class="kn">import</span> <span class="n">Chart</span>

<span class="n">url</span> <span class="o">=</span> <span class="s">&#39;https://vega.github.io/vega-datasets/data/cars.json&#39;</span>

<span class="n">Chart</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">mark_circle</span><span class="p">(</span>
    <span class="n">color</span><span class="o">=</span><span class="s">&#39;red&#39;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">0.3</span>
<span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s">&#39;Horsepower:Q&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s">&#39;Miles_per_Gallon:Q&#39;</span>
<span class="p">)</span>
</pre></div>
</div>

<div id="documentation-rst-altair-plot-11">
<script>
  vg.embed("#documentation-rst-altair-plot-11", "documentation-rst-altair-plot-11.vl.json", function(error, result) {});
</script>
</div></div>
<div class="section" id="data-transformations">
<span id="id2"></span><h2>Data Transformations<a class="headerlink" href="#data-transformations" title="Permalink to this headline">¶</a></h2>
<p>Altair provides a data transformation API that allows both <em>filtering</em> and
<em>transformation</em> of values within the plot renderer. In both cases, the
expressions are given in terms of <em>javascript strings</em> passed to the
<code class="docutils literal"><span class="pre">transform_data</span></code> method.</p>
<p>For example, consider this visualization of the historical US population,
split by age and gender:</p>
<div class="highlight-python" id="documentation-rst-altair-source-12"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">altair</span> <span class="kn">import</span> <span class="n">Chart</span><span class="p">,</span> <span class="n">Color</span><span class="p">,</span> <span class="n">Scale</span>

<span class="n">data</span> <span class="o">=</span> <span class="s">&#39;https://vega.github.io/vega-datasets/data/population.json&#39;</span>
<span class="n">pink_blue</span> <span class="o">=</span> <span class="n">Scale</span><span class="p">(</span><span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;lightblue&quot;</span><span class="p">,</span> <span class="s">&quot;pink&quot;</span><span class="p">])</span>

<span class="n">Chart</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s">&#39;age:O&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s">&#39;mean(people):Q&#39;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="n">Color</span><span class="p">(</span><span class="s">&#39;sex:N&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">pink_blue</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>

<div id="documentation-rst-altair-plot-12">
<script>
  vg.embed("#documentation-rst-altair-plot-12", "documentation-rst-altair-plot-12.vl.json", function(error, result) {});
</script>
</div><p>This visualization shows that on average over the course of history, the
younger population has far outnumbered the older population.</p>
<ol class="arabic simple">
<li>We might wish to zero-in on a particular year, rather than taking a
mean over all years.</li>
<li>The &#8220;1&#8221; and &#8220;2&#8221; labels for gender are not all that informative; we should
probably be change them to &#8220;Male&#8221; and &#8220;Female&#8221; for clarity.</li>
</ol>
<p>We could certainly accomplish this by downloading the dataset, manipulating it
in, say, pandas, and building a chart using the result, but it would be nice to
do this within the Altair spec itself so that we can use the original data
source.</p>
<p>What we&#8217;re looking for is a <code class="docutils literal"><span class="pre">filter</span></code> operation in the first case, and a
<code class="docutils literal"><span class="pre">calculate</span></code> operation in the second. Altair exposes these via the
<a class="reference internal" href="API.html#altair.Chart.transform_data" title="altair.Chart.transform_data"><code class="xref py py-meth docutils literal"><span class="pre">Chart.transform_data()</span></code></a> method, which passes its arguments to the
<a class="reference internal" href="API.html#altair.Transform" title="altair.Transform"><code class="xref py py-class docutils literal"><span class="pre">Transform</span></code></a> class:</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="32%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Trait</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>calculate</td>
<td>list of <a class="reference internal" href="API.html#altair.Formula" title="altair.Formula"><code class="xref py py-class docutils literal"><span class="pre">Formula</span></code></a></td>
<td>Calculate new field(s) using the provided expresssion(s).</td>
</tr>
<tr class="row-odd"><td>filter</td>
<td>string</td>
<td>A string containing the filter Vega expression.</td>
</tr>
<tr class="row-even"><td>filterNull</td>
<td>boolean</td>
<td>Filter null values from the data.</td>
</tr>
</tbody>
</table>
<p>Let&#8217;s remake the plot, using these transformation operations: we&#8217;ll use
<code class="docutils literal"><span class="pre">filter</span></code> to limit the year to 2000, and <code class="docutils literal"><span class="pre">calculate</span></code> to convert the
<em>1/2</em> labels to <em>Male/Female</em>:</p>
<div class="highlight-python" id="documentation-rst-altair-source-13"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">altair</span> <span class="kn">import</span> <span class="n">Chart</span><span class="p">,</span> <span class="n">Color</span><span class="p">,</span> <span class="n">Scale</span><span class="p">,</span> <span class="n">Formula</span>

<span class="n">data</span> <span class="o">=</span> <span class="s">&#39;https://vega.github.io/vega-datasets/data/population.json&#39;</span>
<span class="n">pink_blue</span> <span class="o">=</span> <span class="n">Scale</span><span class="p">(</span><span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;pink&quot;</span><span class="p">,</span> <span class="s">&quot;lightblue&quot;</span><span class="p">])</span>

<span class="n">Chart</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">mark_bar</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s">&#39;age:O&#39;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s">&#39;mean(people):Q&#39;</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="n">Color</span><span class="p">(</span><span class="s">&#39;gender:N&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">pink_blue</span><span class="p">)</span>
<span class="p">)</span><span class="o">.</span><span class="n">transform_data</span><span class="p">(</span>
    <span class="nb">filter</span><span class="o">=</span><span class="s">&#39;datum.year == 2000&#39;</span><span class="p">,</span>
    <span class="n">calculate</span><span class="o">=</span><span class="p">[</span><span class="n">Formula</span><span class="p">(</span><span class="n">field</span><span class="o">=</span><span class="s">&#39;gender&#39;</span><span class="p">,</span>
                       <span class="n">expr</span><span class="o">=</span><span class="s">&#39;datum.sex == 1 ? &quot;Male&quot; : &quot;Female&quot;&#39;</span><span class="p">)],</span>
<span class="p">)</span>
</pre></div>
</div>

<div id="documentation-rst-altair-plot-13">
<script>
  vg.embed("#documentation-rst-altair-plot-13", "documentation-rst-altair-plot-13.vl.json", function(error, result) {});
</script>
</div><p>The <code class="docutils literal"><span class="pre">filter</span></code> attribute of <a class="reference internal" href="API.html#altair.Chart.transform_data" title="altair.Chart.transform_data"><code class="xref py py-meth docutils literal"><span class="pre">transform_data()</span></code></a> accepts a string of
javascript code, referring to the data column name as an attribute of
<code class="docutils literal"><span class="pre">datum</span></code>, which you can think of as the row within the dataset.
The <cite>calculate`</cite> attribute accepts a list of <a class="reference internal" href="API.html#altair.Formula" title="altair.Formula"><code class="xref py py-class docutils literal"><span class="pre">Formula</span></code></a> objects, which
each define a new column using a javascript expression over existing columns.</p>
<p>The <a class="reference internal" href="gallery/bar_grouped.html#gallery-bar-grouped"><span class="std std-ref">Grouped Bar Chart</span></a> example shows a more refined view of this dataset
using these techniques.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Altair Documentation</a><ul>
<li><a class="reference internal" href="#data-in-altair">Data in Altair</a></li>
<li><a class="reference internal" href="#encodings">Encodings</a><ul>
<li><a class="reference internal" href="#channels">Channels</a></li>
<li><a class="reference internal" href="#data-types">Data Types</a></li>
<li><a class="reference internal" href="#binning-and-aggregation">Binning and Aggregation</a></li>
<li><a class="reference internal" href="#encoding-shorthands">Encoding Shorthands</a></li>
</ul>
</li>
<li><a class="reference internal" href="#marks">Marks</a></li>
<li><a class="reference internal" href="#data-transformations">Data Transformations</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="gallery/bar_layered_transparent.html" title="previous chapter">Layered Bar Chart</a></li>
      <li>Next: <a href="recipes.html" title="next chapter">Altair Plot Recipes</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/documentation.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Brian Granger and Jake VanderPlas.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/documentation.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>